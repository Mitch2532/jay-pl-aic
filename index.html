<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Simple Playlist</title>
</head>
<body>
    <h2>Enter Track Links (One per Line)</h2>
    <textarea id="trackInput" rows="10" cols="50" placeholder="Paste direct track URLs here..."></textarea><br>
    <button onclick="generatePlaylist()">Generate Playlist</button>
    <button id="shareButton" style="display:none;" onclick="copyShareLink()">Copy Shareable Link</button>
    <p id="shareLink" style="display:none;"></p>
    
    <h2>Playlist</h2>
    <ul id="playlist"></ul>

    <script>
        function generatePlaylist() {
            const input = document.getElementById("trackInput").value.trim();
            if (!input) return;

            const tracks = input.split("\n").map(track => track.trim()).filter(track => track);
            const playlist = document.getElementById("playlist");
            playlist.innerHTML = "";

            tracks.forEach(track => {
                const li = document.createElement("li");
                li.innerHTML = `<audio controls src="${track}"></audio>`;
                playlist.appendChild(li);
            });

            // Create sharable URL
            const shareableUrl = window.location.origin + window.location.pathname + "?tracks=" + encodeURIComponent(tracks.join(","));
            document.getElementById("shareLink").innerHTML = `<a href="${shareableUrl}" target="_blank">${shareableUrl}</a>`;
            document.getElementById("shareButton").style.display = "block";
            document.getElementById("shareLink").style.display = "block";
        }

        function copyShareLink() {
            const link = document.getElementById("shareLink").querySelector("a").href;
            navigator.clipboard.writeText(link).then(() => {
                alert("Shareable link copied!");
            });
        }

        // Auto-load playlist from URL
        function loadFromURL() {
            const urlParams = new URLSearchParams(window.location.search);
            if (urlParams.has("tracks")) {
                const tracks = decodeURIComponent(urlParams.get("tracks")).split(",");
                document.getElementById("trackInput").value = tracks.join("\n");
                generatePlaylist();
            }
        }

        // Load playlist when page loads
        window.onload = loadFromURL;
    </script>
</body>
</html>
